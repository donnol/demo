# 安全

1 容器宿主机操作系统和多租户环境

    降低权限是非常重要的，也是保护容器安全的最佳实践最好使用尽可能小的权限去创建容器容器应该以一个普通用户的权限来运行，而不是 root 权限的用户

2 容器内容（使用可信来源）

    使用官方docker镜像

3 容器注册（安全访问容器镜像）

    库存储

4 安全性与构建过程

    遵守“一次构建，到处部署”的原则，可以确保构建过程的结果正是生产系统中需要的。保持容器的恒定不变也很重要 — 换句话说就是，不要对正在运行的容器打补丁，而是，重新构建和部署它们。

5 控制好在同一个集群内部署应用

    持续集成和持续部署（CI/CD）
    运行中 -> 发现问题 -> 修复并重新构建 -> 发布到库 -> 库检测到变化后发出通知 -> 机器收到通知并更新

6 容器编配：保护容器平台安全

    多程序多容器
    一程序多容器
    多容器多节点
    容器间的访问
    容器对共享资源的访问
    容器的健康
    容器自动扩展
    容器开发自助服务
    容器平台： 提供基于角色的访问控制

7 网络隔离

    分割流量以隔离不同的用户、团队、应用、以及在这个集群中的环境
    使用 软件定义网络 (SDN) 提供一个定义的网络集群，它允许跨不同集群的容器进行通讯

8 存储

    一个持久卷（PV）可以通过资源提供者支持的任何方式装载到一个主机上

9 API 管理、终端安全、以及单点登录（SSO）

    推荐使用 API 管理工具。所有的 API 平台应该提供多种 API 认证和安全所需要的标准选项，这些选项既可以单独使用，也可以组合使用，以用于发布证书或者控制访问

10 在一个联合集群中的角色和访问管理

    认证和授权

11 只读运行

    在生产环境，很多时候只需要运行，不需要改变容器里的东西

    docker run -d --read-only --tmpfs /run --tmpfs /tmp IMAGE
